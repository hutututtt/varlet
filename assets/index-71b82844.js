import{S as te}from"./index-ebfed653.js";import{d as U,a as i,b,E as oe,_ as Y,f as h,i as ae,S as C,M as F,O as K,P as N,Q as f,m as le,aE as re,w as ie,o as j,e as ce,Z as M,V as de,h as y,F as q,ai as Q,N as O,R,ac as ue,az as fe,q as x,ap as g}from"./vue-router.esm-bundler-0d52b99f.js";import{u as pe,a as ve,e as he,f as me,c as Z,d as V,b as z}from"./components-02edd959.js";import{e as ge}from"./shared-ed2007b2.js";import{t as ye,d as X,g as _e,h as be,f as Ce,b as ke,n as Te,j as Ie}from"./elements-3526b86d.js";import{C as H}from"./index-4ca9b149.js";import{d as xe}from"./index-59604d2c.js";import{u as Ne,c as Be,a as G,_ as Ee,b as $e}from"./index-aa3b5d97.js";import"./index-c530d756.js";import"./index-25f40206.js";import"./index-fcb663bb.js";/* empty css               */const J=Symbol("INDEX_BAR_BIND_INDEX_ANCHOR_KEY"),W=Symbol("INDEX_BAR_COUNT_INDEX_ANCHOR_KEY");function Ae(){const{bindChildren:e,childProviders:a}=pe(J),{length:t}=ve(W);return{length:t,indexAnchors:a,bindIndexAnchors:e}}function Se(){const{parentProvider:e,bindParent:a}=he(J),{index:t}=me(W);if(!e||!a)throw Error('[Varlet] IndexAnchor: You should use this component in "IndexBar"');return{index:t,indexBar:e,bindIndexBar:a}}const we={index:{type:[Number,String]}},{n:De,classes:Oe}=Z("index-anchor"),ze=U({name:"VarIndexAnchor",components:{VarSticky:te},inheritAttrs:!1,props:we,setup(e){const{index:a,indexBar:t,bindIndexBar:u}=Se(),c=i(0),n=i(!1),l=b(()=>e.index),o=i(null),{active:p,sticky:E,cssMode:$,stickyOffsetTop:_,zIndex:k}=t;return u({index:a,name:l,ownTop:c,setOwnTop:()=>{o.value&&(c.value=o.value.$el?o.value.$el.offsetTop:o.value.offsetTop)},setDisabled:T=>{n.value=T}}),{n:De,classes:Oe,name:l,anchorEl:o,active:p,sticky:E,zIndex:k,disabled:n,cssMode:$,stickyOffsetTop:_,Transition:oe}}});function Pe(e,a,t,u,c,n){return h(),ae(re(e.sticky?e.n("$-sticky"):e.Transition),{"offset-top":e.sticky?e.stickyOffsetTop:null,"z-index":e.sticky?e.zIndex:null,disabled:e.disabled&&!e.cssMode,"css-mode":e.cssMode,ref:"anchorEl"},{default:C(()=>[F("div",le({class:e.n()},e.$attrs),[K(e.$slots,"default",{},()=>[N(f(e.name),1)])],16)]),_:3},8,["offset-top","z-index","disabled","css-mode"])}const Re=Y(ze,[["render",Pe]]),Le={sticky:{type:Boolean,default:!0},stickyOffsetTop:{type:[String,Number],default:0},cssMode:{type:Boolean,default:!1},hideList:{type:Boolean,default:!1},zIndex:{type:[Number,String],default:1},highlightColor:{type:String},duration:{type:[Number,String],default:0},onClick:V(),onChange:V()},{n:Me,classes:Ve}=Z("index-bar"),Xe=U({name:"VarIndexBar",props:Le,setup(e){const{length:a,indexAnchors:t,bindIndexAnchors:u}=Ae(),c=i(""),n=i(null),l=i(null),o=i([]),p=i(),E=b(()=>e.sticky),$=b(()=>e.cssMode),_=b(()=>ye(e.stickyOffsetTop)),k=b(()=>e.zIndex);u({active:p,sticky:E,cssMode:$,stickyOffsetTop:_,zIndex:k});const A=(s,r)=>{const d=de(s)?s.name.value:s;d===p.value||d===void 0||(p.value=d,(r==null?void 0:r.event)!==!1&&z(e.onChange,d))},S=()=>{if(!("getBoundingClientRect"in n.value))return 0;const{top:s}=n.value.getBoundingClientRect(),{scrollTop:r}=n.value,{top:d}=l.value.getBoundingClientRect();return r-s+d},T=()=>{const s=be(n.value),r=n.value===window?document.body.scrollHeight:n.value.scrollHeight,d=S();t.forEach((v,m)=>{const w=v.ownTop.value,I=s-w+_.value-d,D=m===t.length-1?r:t[m+1].ownTop.value-v.ownTop.value;I>=0&&I<D&&c.value===""&&(m&&!e.cssMode&&t[m-1].setDisabled(!0),v.setDisabled(!1),A(v))})},L=async({anchorName:s,manualCall:r=!1,options:d})=>{if(r&&z(e.onClick,s),s===p.value)return;const v=t.find(({name:D})=>s===D.value);if(!v)return;const m=S(),w=v.ownTop.value-_.value+m,I=Ce(n.value);c.value=s,A(s,d),await ke(n.value,{left:I,top:w,animation:ge,duration:M(e.duration)}),Te(()=>{c.value=""})},se=(s,r)=>{Ie(()=>L({anchorName:s,options:r}))};return ie(()=>a.value,async()=>{await X(),t.forEach(({name:s,setOwnTop:r})=>{s.value&&o.value.push(s.value),r()})}),j(async()=>{await X(),n.value=_e(l.value),n.value.addEventListener("scroll",T)}),ce(()=>{z(n.value.removeEventListener,"scroll",T)}),{n:Me,classes:Ve,barEl:l,active:p,zIndex:k,anchorNameList:o,toNumber:M,scrollTo:se,anchorClick:L}}});const He=["onClick"];function Ue(e,a,t,u,c,n){return h(),y("div",{class:O(e.n()),ref:"barEl"},[K(e.$slots,"default"),F("ul",{class:O(e.n("anchor-list")),style:R({zIndex:e.toNumber(e.zIndex)+2,display:e.hideList?"none":"block"})},[(h(!0),y(q,null,Q(e.anchorNameList,l=>(h(),y("li",{key:l,class:O(e.classes(e.n("anchor-item"),[e.active===l,e.n("anchor-item--active")])),style:R({color:e.active===l&&e.highlightColor?e.highlightColor:""}),onClick:o=>e.anchorClick({anchorName:l,manualCall:!0})},f(l),15,He))),128))],6)],2)}const B=Y(Xe,[["render",Ue]]);B.install=function(e){e.component(B.name,B)};const Ye={title:"标题",text:"文本"},Fe={title:"Title",text:"Text"},{add:ee,use:Ke,pack:P,packs:rn,merge:cn}=Ne(),je=e=>{Be(e),Ke(e)};G("zh-CN",Ee);G("en-US",$e);ee("zh-CN",Ye);ee("en-US",Fe);const qe={class:"index-bar-example-container"},dn={setup(e){const a=i([]),t=i("#e7edf7"),u=i("#2e67ba");j(()=>{for(let n=0;n<26;n++)a.value.push(String.fromCharCode(65+n))});function c(n){console.log(n)}return ue(je),fe(xe,n=>{t.value=n==="darkTheme"?"rgb(41, 42, 45)":"#e7edf7",u.value=n==="darkTheme"?"#3980e8":"#2e67ba"}),(n,l)=>(h(),y("div",qe,[x(g(B),{onChange:c,duration:"300"},{default:C(()=>[(h(!0),y(q,null,Q(a.value,o=>(h(),y("div",{key:o},[x(Re,{index:o,class:"index-bar-example-anchor",style:R({background:t.value,color:u.value})},{default:C(()=>[N(f(g(P).title)+" "+f(o),1)]),_:2},1032,["index","style"]),x(g(H),null,{default:C(()=>[N(f(o)+" "+f(g(P).text),1)]),_:2},1024),x(g(H),null,{default:C(()=>[N(f(o)+" "+f(g(P).text),1)]),_:2},1024)]))),128))]),_:1})]))}};export{dn as default};
