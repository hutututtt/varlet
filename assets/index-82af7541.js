import{L as q}from"./index-cddd6159.js";import{v as A}from"./index-9e1b28d2.js";import{g as H,t as X}from"./elements-66cdcec2.js";import{d as S,e as Z,c as G,a as w}from"./components-b798c95f.js";import{d as J,a as _,v as K,X as W,n as Y,_ as ee,p as te,ag as ae,f as m,h as y,O as x,M as N,N as T,Q as l,q as s,j as E,D as ie,P as c,r as oe,aN as ne,aa as se,aC as le,S as o,ap as t,au as k,F as b,ai as I,i as R}from"./vue-router-0bbd6486.js";import{d as re}from"./shared-39a089ed.js";import{p as de,u as fe,c as ue,a as D,_ as me,b as pe}from"./index-b02e49a3.js";import{C as F}from"./index-604abe5c.js";import{a as z,T as ge}from"./index-73fb46e3.js";import{T as ce}from"./index-eea8bbd9.js";import{T as V}from"./index-baf9f1ff.js";import{d as he}from"./index-dd768cde.js";import"./index-727aa21f.js";/* empty css               */import"./logger-525ef361.js";import"./index-033b4f4e.js";import"./index-252a635d.js";import"./useChildren-7008b9d6.js";import"./index-c9d79b38.js";import"./provide-7b37ef73.js";import"./provide-1e4e895d.js";import"./index-02c5e8b4.js";const ve={loading:{type:Boolean,default:!1},immediateCheck:{type:Boolean,default:!0},finished:{type:Boolean,default:!1},error:{type:Boolean,default:!1},offset:{type:[String,Number],default:0},loadingText:{type:String},finishedText:{type:String},errorText:{type:String},onLoad:S(),"onUpdate:loading":S(),"onUpdate:error":S()},{n:Te,classes:ke}=G("list"),ye=J({name:"VarList",directives:{Ripple:A},components:{VarLoading:q},props:ve,setup(e){const a=_(null),U=_(null);let p;const C=()=>{w(e["onUpdate:error"],!1),w(e["onUpdate:loading"],!0),w(e.onLoad)},h=()=>{const d=p===window?window.innerHeight:p.getBoundingClientRect().bottom,{bottom:g}=U.value.getBoundingClientRect();return Math.floor(g)-X(e.offset)<=d},r=async()=>{await Y();const{loading:d,finished:g,error:B}=e;!d&&!g&&!B&&h()&&C()};return Z(()=>{p=H(a.value),e.immediateCheck&&r(),p.addEventListener("scroll",r)}),K(()=>{p.removeEventListener("scroll",r)}),{pack:de,listEl:a,detectorEl:U,dt:re,isNumber:W,load:C,check:r,n:Te,classes:ke}}});function Le(e,a,U,p,C,h){const r=te("var-loading"),d=ae("ripple");return m(),y("div",{class:T(e.classes(e.n(),e.n("$--box"))),ref:"listEl"},[x(e.$slots,"default"),e.loading?x(e.$slots,"loading",{key:0},()=>[N("div",{class:T(e.n("loading"))},[N("div",{class:T(e.n("loading-text"))},l(e.dt(e.loadingText,e.pack.listLoadingText)),3),s(r,{size:"mini",radius:10})],2)]):E("",!0),e.finished?x(e.$slots,"finished",{key:1},()=>[N("div",{class:T(e.n("finished"))},l(e.dt(e.finishedText,e.pack.listFinishedText)),3)]):E("",!0),e.error?x(e.$slots,"error",{key:2},()=>[ie((m(),y("div",{class:T(e.n("error")),onClick:a[0]||(a[0]=(...g)=>e.load&&e.load(...g))},[c(l(e.dt(e.errorText,e.pack.listErrorText)),1)],2)),[[d]])]):E("",!0),N("div",{class:T(e.n("detector")),ref:"detectorEl"},null,2)],2)}const L=ee(ye,[["render",Le]]);L.install=function(e){e.component(L.name,L)};const Ue={basicUsage:"基本使用",loadFail:"加载失败",tipText:"提示文字",loadingText:"正在努力输出",errorText:"出错了出错了",finishedText:"一滴都没有了",listItem:"列表项"},Ce={basicUsage:"Basic Usage",loadFail:"Load Fail",tipText:"Tip Text",loadingText:"loading QAQ",errorText:"error TNT",finishedText:"finished ORZ",listItem:"List Item"},{add:M,use:xe,pack:u,packs:Ze,merge:Ge}=fe(),Ne=e=>{ue(e),xe(e)};D("zh-CN",me);D("en-US",pe);M("zh-CN",Ue);M("en-US",Ce);const Je={__name:"index",setup(e){const a=oe({loading:!1,loading2:!1,loading3:!1,finished:!1,finished2:!1,finished3:!1,error:!1,list:[],list2:[],list3:[],current:0}),{list:U,list2:p,list3:C,loading:h,loading2:r,loading3:d,finished:g,finished2:B,finished3:P,error:$,current:v}=ne(a);function Q(){if(a.current!==0){a.loading=!1;return}setTimeout(()=>{for(let f=0;f<20;f++)a.list.push(a.list.length+1);a.loading=!1,a.list.length>=60&&(a.finished=!0)},1e3)}function O(){if(a.current!==1){a.loading2=!1;return}setTimeout(()=>{if(a.list2.length===40){a.error=!0,a.loading2=!1;return}for(let f=0;f<20;f++)a.list2.push(a.list2.length+1);a.loading2=!1},1e3)}function j(){if(a.current!==2){a.loading3=!1;return}setTimeout(()=>{for(let f=0;f<20;f++)a.list3.push(a.list3.length+1);a.loading3=!1,a.list3.length>=60&&(a.finished3=!0)},1e3)}return se(Ne),le(he),(f,n)=>(m(),y(b,null,[s(t(ge),{active:t(v),"onUpdate:active":n[0]||(n[0]=i=>k(v)?v.value=i:null),sticky:"","offset-top":"14.4vw",style:{"margin-bottom":"10px"}},{default:o(()=>[s(t(z),null,{default:o(()=>[c(l(t(u).basicUsage),1)]),_:1}),s(t(z),null,{default:o(()=>[c(l(t(u).loadFail),1)]),_:1}),s(t(z),null,{default:o(()=>[c(l(t(u).tipText),1)]),_:1})]),_:1},8,["active"]),s(t(ce),{active:t(v),"onUpdate:active":n[5]||(n[5]=i=>k(v)?v.value=i:null)},{default:o(()=>[s(t(V),null,{default:o(()=>[s(t(L),{finished:t(g),loading:t(h),"onUpdate:loading":n[1]||(n[1]=i=>k(h)?h.value=i:null),onLoad:Q},{default:o(()=>[(m(!0),y(b,null,I(t(U),i=>(m(),R(t(F),{key:i},{default:o(()=>[c(l(t(u).listItem)+": "+l(i),1)]),_:2},1024))),128))]),_:1},8,["finished","loading"])]),_:1}),s(t(V),null,{default:o(()=>[s(t(L),{finished:t(B),error:t($),"onUpdate:error":n[2]||(n[2]=i=>k($)?$.value=i:null),loading:t(r),"onUpdate:loading":n[3]||(n[3]=i=>k(r)?r.value=i:null),onLoad:O},{default:o(()=>[(m(!0),y(b,null,I(t(p),i=>(m(),R(t(F),{key:i},{default:o(()=>[c(l(t(u).listItem)+": "+l(i),1)]),_:2},1024))),128))]),_:1},8,["finished","error","loading"])]),_:1}),s(t(V),null,{default:o(()=>[s(t(L),{"loading-text":t(u).loadingText,"finished-text":t(u).finishedText,"error-text":t(u).errorText,finished:t(P),loading:t(d),"onUpdate:loading":n[4]||(n[4]=i=>k(d)?d.value=i:null),onLoad:j},{default:o(()=>[(m(!0),y(b,null,I(t(C),i=>(m(),R(t(F),{key:i},{default:o(()=>[c(l(t(u).listItem)+": "+l(i),1)]),_:2},1024))),128))]),_:1},8,["loading-text","finished-text","error-text","finished","loading"])]),_:1})]),_:1},8,["active"])],64))}};export{Je as default};
