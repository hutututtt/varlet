import{F as x,u as _}from"./provide-1db4002d.js";import{p as ee,V as oe}from"./FieldDecorator-d81ee36c.js";import{d as u,p as ne,k as ae,a as d,e as le,c as re}from"./components-b798c95f.js";import{d as se,a as h,t as de,b as f,aI as c,n as te,Z as ie,_ as ue,p as z,f as g,h as C,q as E,S as F,O as N,N as v,R as I,j as pe,aJ as me,aK as he,ah as fe}from"./vue-router-0bbd6486.js";function ge(e){return["text","password","number"].includes(e)}const Ce={modelValue:{type:String},modelModifiers:{type:Object,default:()=>({})},type:{type:String,default:"text",validator:ge},textarea:{type:Boolean,default:!1},rows:{type:[String,Number],default:8},maxlength:{type:[String,Number]},readonly:{type:Boolean,default:!1},resize:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},validateTrigger:{type:Array,default:()=>["onInput","onClear"]},rules:{type:Array},onFocus:u(),onBlur:u(),onInput:u(),onChange:u(),onClear:u(),"onUpdate:modelValue":u(),...ne(ee,["size","variant","placeholder","line","hint","textColor","focusColor","blurColor","disabled","clearable","onClick"])},{n:ve,classes:be}=re("input"),ye=se({name:"VarInput",components:{VarFormDetails:x,VarFieldDecorator:oe},props:Ce,setup(e){const n=h(`var-input-${de().uid}`),p=h(null),m=h(!1),t=h(!1),T=f(()=>e.type==="number"?"text":e.type),b=f(()=>{const{maxlength:o,modelValue:r}=e;return o?c(r)?`0 / ${o}`:`${String(r).length}/${o}`:""}),y=f(()=>e.disabled||e.readonly?"":"text"),a=f(()=>{const{hint:o,blurColor:r,focusColor:s}=e;if(!o)return k.value?"var(--field-decorator-error-color)":m.value?s||"var(--field-decorator-focus-color)":r||"var(--field-decorator-blur-color)"}),{bindForm:P,form:l}=_(),{errorMessage:k,validateWithTrigger:R,validate:O,resetValidation:M}=ae(),i=o=>{te(()=>{const{validateTrigger:r,rules:s,modelValue:V}=e;R(r,o,s,V)})},U=o=>{m.value=!0,d(e.onFocus,o),i("onFocus")},j=o=>{m.value=!1,d(e.onBlur,o),i("onBlur")},S=o=>{const r=o.target;let{value:s}=r;return e.type==="number"&&(s=Z(s)),H(G(s))},A=()=>{t.value=!0},W=o=>{t.value&&(t.value=!1,o.target.dispatchEvent(new Event("input")))},q=o=>{if(t.value)return;const r=S(o);d(e["onUpdate:modelValue"],r),d(e.onInput,r,o),i("onInput")},J=o=>{const r=S(o);d(e.onChange,r,o),i("onChange")},K=()=>{const{disabled:o,readonly:r,clearable:s,onClear:V}=e;l!=null&&l.disabled.value||l!=null&&l.readonly.value||o||r||!s||(d(e["onUpdate:modelValue"],""),d(V,""),i("onClear"))},L=o=>{const{disabled:r,onClick:s}=e;l!=null&&l.disabled.value||r||(d(s,o),i("onClick"))},Z=o=>{const r=o.indexOf("-"),s=o.indexOf(".");return r>-1&&(o=r===0?"-"+o.replace(/-/g,""):o.replace(/-/g,"")),s>-1&&(o=o.slice(0,s+1)+o.slice(s).replace(/\./g,"")),o.replace(/[^-0-9.]/g,"")},G=o=>e.modelModifiers.trim?o.trim():o,H=o=>e.maxlength?o.slice(0,ie(e.maxlength)):o,Q=o=>{const{disabled:r,readonly:s}=e;l!=null&&l.disabled.value||l!=null&&l.readonly.value||r||s||o.stopPropagation()};function X(o){const{disabled:r}=e;l!=null&&l.disabled.value||r||o.target===p.value||(w(),o.preventDefault())}const $=()=>{d(e["onUpdate:modelValue"],""),M()},D=()=>O(e.rules,e.modelValue),w=()=>{var o;(o=p.value)==null||o.focus()},Y=()=>{p.value.blur()};return d(P,{reset:$,validate:D,resetValidation:M}),le(()=>{e.autofocus&&w()}),{el:p,id:n,isFocus:m,isComposing:t,errorMessage:k,placeholderColor:a,type:T,cursor:y,maxlengthText:b,formDisabled:l==null?void 0:l.disabled,formReadonly:l==null?void 0:l.readonly,n:ve,classes:be,isEmpty:c,handleFocus:U,handleBlur:j,handleInput:q,handleChange:J,handleClear:K,handleClick:L,handleTouchstart:Q,handleCompositionStart:A,handleCompositionEnd:W,handleMousedown:X,validate:D,resetValidation:M,reset:$,focus:w,blur:Y}}});const Me=["placeholder"],we=["id","disabled","type","value","placeholder","maxlength","rows"],Ve=["id","disabled","type","value","placeholder","maxlength"];function Fe(e,n,p,m,t,T){const b=z("var-field-decorator"),y=z("var-form-details");return g(),C("div",{class:v(e.classes(e.n(),e.n("$--box"))),onMousedown:n[15]||(n[15]=(...a)=>e.handleMousedown&&e.handleMousedown(...a))},[E(b,me(he({value:e.modelValue,id:e.id,size:e.size,variant:e.variant,placeholder:e.placeholder,line:e.line,hint:e.hint,textColor:e.textColor,focusColor:e.focusColor,blurColor:e.blurColor,isFocus:e.isFocus,errorMessage:e.errorMessage,formDisabled:e.formDisabled,disabled:e.disabled,clearable:e.clearable,textarea:e.textarea,cursor:e.cursor,composing:e.isComposing,alwaysCustomPlaceholder:!1,onClick:e.handleClick,onClear:e.handleClear})),{"prepend-icon":F(()=>[N(e.$slots,"prepend-icon")]),"append-icon":F(()=>[N(e.$slots,"append-icon")]),default:F(()=>[e.type==="password"?(g(),C("input",{key:0,class:v(e.n("autocomplete")),placeholder:e.hint?void 0:e.placeholder,style:I({"--input-placeholder-color":e.placeholderColor})},null,14,Me)):pe("",!0),e.textarea?(g(),C("textarea",{key:1,class:v(e.classes(e.n("input"),e.n("--textarea"),[e.formDisabled||e.disabled,e.n("--disabled")],[e.errorMessage,e.n("--error")],[e.errorMessage,e.n("--caret-error")])),ref:"el",autocomplete:"new-password",id:e.id,disabled:e.formDisabled||e.disabled||e.formReadonly||e.readonly,type:e.type,value:e.modelValue,placeholder:e.hint?void 0:e.placeholder,maxlength:e.maxlength,rows:e.rows,style:I({color:e.errorMessage?void 0:e.textColor,caretColor:e.errorMessage?void 0:e.focusColor,resize:e.resize?"vertical":"none","--input-placeholder-color":e.placeholderColor}),onFocus:n[0]||(n[0]=(...a)=>e.handleFocus&&e.handleFocus(...a)),onBlur:n[1]||(n[1]=(...a)=>e.handleBlur&&e.handleBlur(...a)),onInput:n[2]||(n[2]=(...a)=>e.handleInput&&e.handleInput(...a)),onChange:n[3]||(n[3]=(...a)=>e.handleChange&&e.handleChange(...a)),onTouchstart:n[4]||(n[4]=(...a)=>e.handleTouchstart&&e.handleTouchstart(...a)),onCompositionstart:n[5]||(n[5]=(...a)=>e.handleCompositionStart&&e.handleCompositionStart(...a)),onCompositionend:n[6]||(n[6]=(...a)=>e.handleCompositionEnd&&e.handleCompositionEnd(...a))},`
      `,46,we)):(g(),C("input",{key:2,class:v(e.classes(e.n("input"),[e.formDisabled||e.disabled,e.n("--disabled")],[e.errorMessage,e.n("--error")],[e.errorMessage,e.n("--caret-error")])),ref:"el",autocomplete:"new-password",id:e.id,disabled:e.formDisabled||e.disabled||e.formReadonly||e.readonly,type:e.type,value:e.modelValue,placeholder:e.hint?void 0:e.placeholder,maxlength:e.maxlength,style:I({color:e.errorMessage?void 0:e.textColor,caretColor:e.errorMessage?void 0:e.focusColor,"--input-placeholder-color":e.placeholderColor}),onFocus:n[7]||(n[7]=(...a)=>e.handleFocus&&e.handleFocus(...a)),onBlur:n[8]||(n[8]=(...a)=>e.handleBlur&&e.handleBlur(...a)),onInput:n[9]||(n[9]=(...a)=>e.handleInput&&e.handleInput(...a)),onChange:n[10]||(n[10]=(...a)=>e.handleChange&&e.handleChange(...a)),onTouchstart:n[11]||(n[11]=(...a)=>e.handleTouchstart&&e.handleTouchstart(...a)),onCompositionstart:n[12]||(n[12]=(...a)=>e.handleCompositionStart&&e.handleCompositionStart(...a)),onCompositionend:n[13]||(n[13]=(...a)=>e.handleCompositionEnd&&e.handleCompositionEnd(...a))},null,46,Ve))]),_:3},16),E(y,{"error-message":e.errorMessage,"extra-message":e.maxlengthText,onMousedown:n[14]||(n[14]=fe(()=>{},["stop"]))},null,8,["error-message","extra-message"])],34)}const B=ue(ye,[["render",Fe]]);B.install=function(e){e.component(B.name,B)};export{B as I};
