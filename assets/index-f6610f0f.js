import{I as W}from"./index-033b4f4e.js";import{F as Y,u as q}from"./provide-1db4002d.js";import{v as L}from"./index-9e1b28d2.js";import{v as J}from"./index-5cbdb505.js";import{d as g,u as Q,k as Z,a as c,c as _}from"./components-b798c95f.js";import{u as x}from"./useChildren-7008b9d6.js";import{H as ee,u as ae}from"./index-fbb0fcba.js";import{d as oe,a as N,b as E,w as ne,n as se,_ as re,p,ag as w,f as z,h as A,M,D as le,N as d,R as ie,O as y,q as v}from"./vue-router-0bbd6486.js";const R=Symbol("CHECKBOX_GROUP_BIND_CHECKBOX_KEY");function Ve(){const{bindChildren:e,childProviders:n,length:l}=x(R);return{length:l,checkboxes:n,bindCheckboxes:e}}const ce={modelValue:{type:[String,Number,Boolean,Object,Array],default:!1},checkedValue:{type:[String,Number,Boolean,Object,Array],default:!0},uncheckedValue:{type:[String,Number,Boolean,Object,Array],default:!1},checkedColor:{type:String},uncheckedColor:{type:String},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},iconSize:{type:[String,Number]},ripple:{type:Boolean,default:!0},validateTrigger:{type:Array,default:["onChange"]},rules:{type:Array},onClick:g(),onChange:g(),"onUpdate:modelValue":g()};function de(){const{bindParent:e,parentProvider:n,index:l}=Q(R);return{index:l,checkboxGroup:n,bindCheckboxGroup:e}}const{n:te,classes:ue}=_("checkbox"),he=oe({name:"VarCheckbox",directives:{Ripple:L,Hover:J},components:{VarIcon:W,VarFormDetails:Y,VarHoverOverlay:ee},props:ce,setup(e){const n=N(!1),l=E(()=>n.value===e.checkedValue),B=E(()=>e.checkedValue),t=N(!1),{checkboxGroup:s,bindCheckboxGroup:u}=de(),{hovering:m,handleHovering:k}=ae(),{form:a,bindForm:b}=q(),{errorMessage:f,validateWithTrigger:P,validate:$,resetValidation:C}=Z(),K=o=>{se(()=>{const{validateTrigger:r,rules:i,modelValue:h}=e;P(r,o,i,h)})},O=o=>{n.value=o;const{checkedValue:r,onChange:i}=e;c(e["onUpdate:modelValue"],n.value),c(i,n.value),K("onChange"),o===r?s==null||s.onChecked(r):s==null||s.onUnchecked(r)},U=o=>{const{disabled:r,readonly:i,checkedValue:h,uncheckedValue:G,onClick:X}=e;if(a!=null&&a.disabled.value||r||(c(X,o),a!=null&&a.readonly.value||i))return;t.value=!0;const j=s?s.checkedCount.value>=Number(s.max.value):!1;!l.value&&j||O(l.value?G:h)},F=o=>{const{checkedValue:r,uncheckedValue:i}=e;n.value=o.includes(r)?r:i},I=()=>{t.value=!1},D=()=>{c(e["onUpdate:modelValue"],e.uncheckedValue),C()},T=o=>{const{checkedValue:r,uncheckedValue:i}=e;![r,i].includes(o)&&(o=l.value?i:r),O(o)},H=()=>$(e.rules,e.modelValue);ne(()=>e.modelValue,o=>{n.value=o},{immediate:!0});const S={checkedValue:B,checked:l,sync:F,validate:H,resetValidation:C,reset:D,resetWithAnimation:I};return c(u,S),c(b,S),{withAnimation:t,checked:l,errorMessage:f,checkboxGroupErrorMessage:s==null?void 0:s.errorMessage,formDisabled:a==null?void 0:a.disabled,formReadonly:a==null?void 0:a.readonly,hovering:m,handleHovering:k,n:te,classes:ue,handleClick:U,toggle:T,reset:D,validate:H,resetValidation:C}}});function ve(e,n,l,B,t,s){const u=p("var-icon"),m=p("var-hover-overlay"),k=p("var-form-details"),a=w("hover"),b=w("ripple");return z(),A("div",{class:d(e.n("wrap")),onClick:n[0]||(n[0]=(...f)=>e.handleClick&&e.handleClick(...f))},[M("div",{class:d(e.n())},[le((z(),A("div",{class:d(e.classes(e.n("action"),[e.checked,e.n("--checked"),e.n("--unchecked")],[e.errorMessage||e.checkboxGroupErrorMessage,e.n("--error")],[e.formDisabled||e.disabled,e.n("--disabled")])),style:ie({color:e.checked?e.checkedColor:e.uncheckedColor})},[e.checked?y(e.$slots,"checked-icon",{key:0},()=>[v(u,{class:d(e.classes(e.n("icon"),[e.withAnimation,e.n("--with-animation")])),name:"checkbox-marked",size:e.iconSize,"var-checkbox-cover":""},null,8,["class","size"])]):y(e.$slots,"unchecked-icon",{key:1},()=>[v(u,{class:d(e.classes(e.n("icon"),[e.withAnimation,e.n("--with-animation")])),name:"checkbox-blank-outline",size:e.iconSize,"var-checkbox-cover":""},null,8,["class","size"])]),v(m,{hovering:!e.disabled&&!e.formDisabled&&e.hovering},null,8,["hovering"])],6)),[[a,e.handleHovering,"desktop"],[b,{disabled:e.formReadonly||e.readonly||e.formDisabled||e.disabled||!e.ripple}]]),M("div",{class:d(e.classes(e.n("text"),[e.errorMessage||e.checkboxGroupErrorMessage,e.n("--error")],[e.formDisabled||e.disabled,e.n("--disabled")]))},[y(e.$slots,"default")],2)],2),v(k,{"error-message":e.errorMessage},null,8,["error-message"])],2)}const V=re(he,[["render",ve]]);V.install=function(e){e.component(V.name,V)};export{V as C,Ve as u};
