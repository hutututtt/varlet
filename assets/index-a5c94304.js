import{I as q}from"./index-033b4f4e.js";import{F as A,u as E}from"./provide-1db4002d.js";import{v as X}from"./index-9e1b28d2.js";import{H as Z,u as j}from"./index-fbb0fcba.js";import{v as G}from"./index-5cbdb505.js";import{d as z,k as J,a as m,c as K}from"./components-b798c95f.js";import{a as B}from"./elements-66cdcec2.js";import{d as Q,a as Y,Z as s,n as x,_ as ee,p as C,ag as F,f as S,h as V,M as ae,F as oe,ai as re,D as te,R as U,N as v,q as H}from"./vue-router-0bbd6486.js";const ne={modelValue:{type:[String,Number],default:0},count:{type:[String,Number],default:5},color:{type:String},icon:{type:String,default:"star"},emptyColor:{type:String},emptyIcon:{type:String,default:"star-outline"},size:{type:[String,Number]},gap:{type:[String,Number]},namespace:{type:String},half:{type:Boolean,default:!1},halfIcon:{type:String,default:"star-half-full"},disabled:{type:Boolean,default:!1},disabledColor:{type:String},readonly:{type:Boolean,default:!1},ripple:{type:Boolean,default:!0},rules:{type:Array},onChange:z(),"onUpdate:modelValue":z()},{n:i}=K("rate"),le=Q({name:"VarRate",components:{VarIcon:q,VarFormDetails:A,VarHoverOverlay:Z},directives:{Ripple:X,Hover:G},props:ne,setup(e){const{form:a,bindForm:N}=E(),{errorMessage:p,validateWithTrigger:R,validate:_,resetValidation:l}=J(),{hovering:d}=j(),c=Y(-1),g=o=>{const{count:r,gap:n}=e;return{color:t(o).color,marginRight:o!==s(r)?B(n):0}},y=o=>{const{name:r,color:n}=t(o);return{[i("content")]:!0,[i("--disabled")]:(a==null?void 0:a.disabled.value)||e.disabled,[i("--error")]:p.value,[i("--primary")]:r!==e.emptyIcon&&!n}},t=o=>{const{modelValue:r,disabled:n,disabledColor:u,color:h,half:P,emptyColor:T,icon:W,halfIcon:w,emptyIcon:L}=e;let b=h;return(n||a!=null&&a.disabled.value)&&(b=u),o<=s(r)?{color:b,name:W}:P&&o<=s(r)+.5?{color:b,name:w}:{color:n||a!=null&&a.disabled.value?u:T,name:L}},f=(o,r)=>{if(e.half){const{offsetWidth:n}=r.target;r.offsetX<=Math.floor(n/2)&&(o-=.5)}m(e["onUpdate:modelValue"],o)},D=()=>_(e.rules,s(e.modelValue)),M=()=>x(()=>R(["onChange"],"onChange",e.rules,e.modelValue)),$=(o,r)=>{const{readonly:n,disabled:u,onChange:h}=e;n||u||a!=null&&a.disabled.value||a!=null&&a.readonly.value||(f(o,r),m(h,o),M())},O=o=>r=>{c.value=o,d.value=r},I=()=>{m(e["onUpdate:modelValue"],0),l()};return m(N,{reset:I,validate:D,resetValidation:l}),{errorMessage:p,formDisabled:a==null?void 0:a.disabled,formReadonly:a==null?void 0:a.readonly,getStyle:g,getClass:y,getCurrentState:t,handleClick:$,hovering:d,currentHoveringValue:c,createHoverHandler:O,reset:I,validate:D,resetValidation:l,toSizeUnit:B,toNumber:s,n:i}}});const se=["onClick"];function ie(e,a,N,p,R,_){const l=C("var-icon"),d=C("var-hover-overlay"),c=C("var-form-details"),g=F("ripple"),y=F("hover");return S(),V("div",{class:v(e.n("wrap"))},[ae("div",{class:v(e.n())},[(S(!0),V(oe,null,re(e.toNumber(e.count),t=>te((S(),V("div",{key:t,style:U(e.getStyle(t)),class:v(e.getClass(t)),onClick:f=>e.handleClick(t,f)},[H(l,{class:v(e.n("content-icon")),"var-rate-cover":"",transition:0,namespace:e.namespace,name:e.getCurrentState(t).name,style:U({fontSize:e.toSizeUnit(e.size)})},null,8,["class","namespace","name","style"]),H(d,{hovering:e.hovering&&t===e.currentHoveringValue&&!e.disabled&&!e.formDisabled},null,8,["hovering"])],14,se)),[[g,{disabled:e.formReadonly||e.readonly||e.formDisabled||e.disabled||!e.ripple}],[y,e.createHoverHandler(t),"desktop"]])),128))],2),H(c,{"error-message":e.errorMessage},null,8,["error-message"])],2)}const k=ee(le,[["render",ie]]);k.install=function(e){e.component(k.name,k)};export{k as R};
