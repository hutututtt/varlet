import{F as H,u as J}from"./provide-54996f70.js";import{I as K}from"./index-c530d756.js";import{d as t,i as X,b as i,c as Y}from"./components-02edd959.js";import{d as x,a as F,t as _,b as P,aF as b,o as ee,Z as ne,n as le,_ as ae,p as z,f as m,h as f,M as p,N as d,O,j as I,R as g,Q as oe,i as se,q as re}from"./vue-router.esm-bundler-0d52b99f.js";function de(e){return["text","password","number"].includes(e)}const ie={modelValue:{type:String},modelModifiers:{type:Object,default:()=>({})},type:{type:String,default:"text",validator:de},textarea:{type:Boolean,default:!1},rows:{type:[String,Number],default:8},placeholder:{type:String},line:{type:Boolean,default:!0},hint:{type:Boolean,default:!0},textColor:{type:String},focusColor:{type:String},blurColor:{type:String},maxlength:{type:[String,Number]},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},resize:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},validateTrigger:{type:Array,default:()=>["onInput","onClear"]},rules:{type:Array},onFocus:t(),onBlur:t(),onClick:t(),onClear:t(),onInput:t(),onChange:t(),"onUpdate:modelValue":t()},{n:V,classes:te}=Y("input"),ue=x({name:"VarInput",components:{VarIcon:K,VarFormDetails:H},props:ie,setup(e){const l=F(`var-input-${_().uid}`),y=F(null),h=F(!1),M=P(()=>e.type==="number"?"text":e.type),T=P(()=>{const{maxlength:n,modelValue:r}=e;return n?b(r)?`0 / ${n}`:`${String(r).length}/${n}`:""}),{bindForm:C,form:o}=J(),{errorMessage:s,validateWithTrigger:R,validate:U,resetValidation:v}=X(),u=n=>{le(()=>{const{validateTrigger:r,rules:a,modelValue:B}=e;R(r,n,a,B)})},c=()=>{const{hint:n,modelValue:r}=e;if(!n&&!b(r))return V("--placeholder-hidden");if(n&&(!b(r)||h.value))return V("--placeholder-hint")},E=n=>{h.value=!0,i(e.onFocus,n),u("onFocus")},j=n=>{h.value=!1,i(e.onBlur,n),u("onBlur")},A=n=>{const r=n.target;let{value:a}=r;e.type==="number"&&(a=Q(a)),a=w(S(a)),r.value=a,i(e["onUpdate:modelValue"],a),i(e.onInput,a,n),u("onInput")},W=n=>{const r=n.target;let{value:a}=r;a=w(S(a)),r.value=a,i(e.onChange,a,n),u("onChange")},q=()=>{const{disabled:n,readonly:r,clearable:a,onClear:B}=e;o!=null&&o.disabled.value||o!=null&&o.readonly.value||n||r||!a||(i(e["onUpdate:modelValue"],""),i(B,""),u("onClear"))},L=n=>{const{disabled:r,onClick:a}=e;o!=null&&o.disabled.value||r||(i(a,n),u("onClick"))},Q=n=>{const r=n.indexOf("-"),a=n.indexOf(".");return r>-1&&(n=r===0?"-"+n.replace(/-/g,""):n.replace(/-/g,"")),a>-1&&(n=n.slice(0,a+1)+n.slice(a).replace(/\./g,"")),n.replace(/[^-0-9.]/g,"")},S=n=>e.modelModifiers.trim?n.trim():n,w=n=>e.maxlength?n.slice(0,ne(e.maxlength)):n,Z=n=>{const{disabled:r,readonly:a}=e;o!=null&&o.disabled.value||o!=null&&o.readonly.value||r||a||n.stopPropagation()},D=()=>{i(e["onUpdate:modelValue"],""),v()},$=()=>U(e.rules,e.modelValue),N=()=>{var n;(n=y.value)==null||n.focus()},G=()=>{y.value.blur()};return i(C,{reset:D,validate:$,resetValidation:v}),ee(()=>{e.autofocus&&N()}),{el:y,id:l,isFocus:h,errorMessage:s,type:M,maxlengthText:T,formDisabled:o==null?void 0:o.disabled,formReadonly:o==null?void 0:o.readonly,n:V,classes:te,isEmpty:b,computePlaceholderState:c,handleFocus:E,handleBlur:j,handleInput:A,handleChange:W,handleClear:q,handleClick:L,handleTouchstart:Z,validate:$,resetValidation:v,reset:D,focus:N,blur:G}}});const me=["id","disabled","type","value","maxlength","rows"],pe=["id","disabled","type","value","maxlength"],ge=["for"];function he(e,l,y,h,M,T){const C=z("var-icon"),o=z("var-form-details");return m(),f("div",{class:d(e.classes(e.n(),e.n("$--box"),[e.disabled,e.n("--disabled")])),onClick:l[10]||(l[10]=(...s)=>e.handleClick&&e.handleClick(...s))},[p("div",{class:d(e.classes(e.n("controller"),[e.isFocus,e.n("--focus")],[e.errorMessage,e.n("--error")],[e.formDisabled||e.disabled,e.n("--disabled")])),style:g({color:e.errorMessage?void 0:e.isFocus?e.focusColor:e.blurColor})},[p("div",{class:d(e.classes(e.n("icon"),[!e.hint,e.n("--non-hint")]))},[O(e.$slots,"prepend-icon")],2),p("div",{class:d(e.classes(e.n("wrap"),[!e.hint,e.n("--non-hint")]))},[e.type==="password"?(m(),f("input",{key:0,class:d(e.n("autocomplete"))},null,2)):I("",!0),e.textarea?(m(),f("textarea",{key:1,class:d(e.classes(e.n("input"),e.n("--textarea"),[e.formDisabled||e.disabled,e.n("--disabled")],[e.errorMessage,e.n("--caret-error")])),ref:"el",autocomplete:"new-password",id:e.id,disabled:e.formDisabled||e.disabled||e.formReadonly||e.readonly,type:e.type,value:e.modelValue,maxlength:e.maxlength,rows:e.rows,style:g({color:e.textColor,caretColor:e.errorMessage?void 0:e.focusColor,resize:e.resize?"vertical":"none"}),onFocus:l[0]||(l[0]=(...s)=>e.handleFocus&&e.handleFocus(...s)),onBlur:l[1]||(l[1]=(...s)=>e.handleBlur&&e.handleBlur(...s)),onInput:l[2]||(l[2]=(...s)=>e.handleInput&&e.handleInput(...s)),onChange:l[3]||(l[3]=(...s)=>e.handleChange&&e.handleChange(...s)),onTouchstart:l[4]||(l[4]=(...s)=>e.handleTouchstart&&e.handleTouchstart(...s))},`
        `,46,me)):(m(),f("input",{key:2,class:d(e.classes(e.n("input"),[e.formDisabled||e.disabled,e.n("--disabled")],[e.errorMessage,e.n("--caret-error")])),ref:"el",autocomplete:"new-password",id:e.id,disabled:e.formDisabled||e.disabled||e.formReadonly||e.readonly,type:e.type,value:e.modelValue,maxlength:e.maxlength,style:g({color:e.textColor,caretColor:e.errorMessage?void 0:e.focusColor}),onFocus:l[5]||(l[5]=(...s)=>e.handleFocus&&e.handleFocus(...s)),onBlur:l[6]||(l[6]=(...s)=>e.handleBlur&&e.handleBlur(...s)),onInput:l[7]||(l[7]=(...s)=>e.handleInput&&e.handleInput(...s)),onChange:l[8]||(l[8]=(...s)=>e.handleChange&&e.handleChange(...s)),onTouchstart:l[9]||(l[9]=(...s)=>e.handleTouchstart&&e.handleTouchstart(...s))},null,46,pe)),p("label",{class:d(e.classes(e.n("$--ellipsis"),[e.isFocus,e.n("--focus")],[e.formDisabled||e.disabled,e.n("--disabled")],[e.errorMessage,e.n("--error")],[e.textarea,e.n("textarea-placeholder"),e.n("placeholder")],e.computePlaceholderState(),[!e.hint,e.n("--placeholder-non-hint")])),style:g({color:e.errorMessage?void 0:e.isFocus?e.focusColor:e.blurColor}),for:e.id},oe(e.placeholder),15,ge)],2),p("div",{class:d(e.classes(e.n("icon"),[!e.hint,e.n("--non-hint")]))},[O(e.$slots,"append-icon",{},()=>[e.clearable&&!e.isEmpty(e.modelValue)?(m(),se(C,{key:0,class:d(e.n("clear-icon")),"var-input-cover":"",name:"close-circle",onClick:e.handleClear},null,8,["class","onClick"])):I("",!0)])],2)],6),e.line?(m(),f("div",{key:0,class:d(e.classes(e.n("line"),[e.formDisabled||e.disabled,e.n("--line-disabled")],[e.errorMessage,e.n("--line-error")])),style:g({background:e.errorMessage?void 0:e.blurColor})},[p("div",{class:d(e.classes(e.n("dot"),[e.isFocus,e.n("--spread")],[e.formDisabled||e.disabled,e.n("--line-disabled")],[e.errorMessage,e.n("--line-error")])),style:g({background:e.errorMessage?void 0:e.focusColor})},null,6)],6)):I("",!0),re(o,{"error-message":e.errorMessage,"extra-message":e.maxlengthText},null,8,["error-message","extra-message"])],2)}const k=ae(ue,[["render",he]]);k.install=function(e){e.component(k.name,k)};export{k as I};
