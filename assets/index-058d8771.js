import{S as ae}from"./index-252a635d.js";import{d as Y,a as u,b as k,E as re,_ as j,f as v,i as le,S as C,M as q,m as ie,O as K,P as $,Q as m,aH as ce,w as de,e as ue,y as fe,x as pe,Z as V,V as me,h as y,F as Q,ai as Z,N as P,R as O,o as ve,aa as he,aC as ye,q as B,ap as h}from"./vue-router-0bbd6486.js";import{u as ge,c as G,d as H,e as be,a as U}from"./components-b798c95f.js";import{e as ke}from"./logger-525ef361.js";import{u as Ce}from"./useChildren-7008b9d6.js";import{e as _e}from"./shared-39a089ed.js";import{t as xe,e as Te,b as Ie,n as Be,j as $e,d as F,h as Se,g as Ne}from"./elements-66cdcec2.js";import{C as X}from"./index-604abe5c.js";import{d as Ae}from"./index-dd768cde.js";import{u as we,c as Ee,a as J,_ as ze,b as De}from"./index-b02e49a3.js";import"./index-033b4f4e.js";import"./index-9e1b28d2.js";import"./index-727aa21f.js";/* empty css               */const W=Symbol("INDEX_BAR_BIND_INDEX_ANCHOR_KEY");function Pe(){const{bindChildren:e,length:l,childProviders:o}=Ce(W);return{length:l,indexAnchors:o,bindIndexAnchors:e}}function Le(){const{parentProvider:e,index:l,bindParent:o}=ge(W);return o||ke("IndexAnchor",'You should use this component in "IndexBar"'),{index:l,indexBar:e,bindIndexBar:o}}const Oe={index:{type:[Number,String]}},{n:Me,classes:Re}=G("index-anchor"),Ve=Y({name:"VarIndexAnchor",components:{VarSticky:ae},inheritAttrs:!1,props:Oe,setup(e){const{index:l,indexBar:o,bindIndexBar:f}=Le(),c=u(0),s=u(!1),i=k(()=>e.index),n=u(null),{active:N,sticky:A,cssMode:g,stickyOffsetTop:_,zIndex:a}=o;return f({index:l,name:i,ownTop:c,setOwnTop:()=>{n.value&&(c.value=n.value.$el?n.value.$el.offsetTop:n.value.offsetTop)},setDisabled:x=>{s.value=x}}),{n:Me,classes:Re,name:i,anchorEl:n,active:N,sticky:A,zIndex:a,disabled:s,cssMode:g,stickyOffsetTop:_,Transition:re}}});function He(e,l,o,f,c,s){return v(),le(ce(e.sticky?e.n("$-sticky"):e.Transition),{"offset-top":e.sticky?e.stickyOffsetTop:null,"z-index":e.sticky?e.zIndex:null,disabled:e.disabled&&!e.cssMode,"css-mode":e.cssMode,ref:"anchorEl"},{default:C(()=>[q("div",ie({class:e.n()},e.$attrs),[K(e.$slots,"default",{},()=>[$(m(e.name),1)])],16)]),_:3},8,["offset-top","z-index","disabled","css-mode"])}const Ue=j(Ve,[["render",He]]),Fe={sticky:{type:Boolean,default:!0},stickyOffsetTop:{type:[String,Number],default:0},cssMode:{type:Boolean,default:!1},stickyCssMode:{type:Boolean,default:!1},hideList:{type:Boolean,default:!1},zIndex:{type:[Number,String],default:1},highlightColor:{type:String},duration:{type:[Number,String],default:0},onClick:H(),onChange:H()},{n:Xe,classes:Ye}=G("index-bar"),je=Y({name:"VarIndexBar",props:Fe,setup(e){const{length:l,indexAnchors:o,bindIndexAnchors:f}=Pe(),c=u(""),s=u(null),i=u([]),n=u(),N=k(()=>e.sticky),A=k(()=>e.stickyCssMode||e.cssMode),g=k(()=>xe(e.stickyOffsetTop)),_=k(()=>e.zIndex);let a=null,b=!1;f({active:n,sticky:N,cssMode:A,stickyOffsetTop:g,zIndex:_});const w=(t,r)=>{const d=me(t)?t.name.value:t;d===n.value||d===void 0||(n.value=d,(r==null?void 0:r.event)!==!1&&U(e.onChange,d))},x=()=>{if(!("getBoundingClientRect"in a))return 0;const{top:t}=a.getBoundingClientRect(),{scrollTop:r}=a,{top:d}=s.value.getBoundingClientRect();return r-t+d},M=()=>{const t=Se(a),r=a===window?document.body.scrollHeight:a.scrollHeight,d=x();o.forEach((p,T)=>{const z=p.ownTop.value,I=t-z+g.value-d,D=T===o.length-1?r:o[T+1].ownTop.value-p.ownTop.value;p.setDisabled(!0),I>=0&&I<D&&c.value===""&&(p.setDisabled(!1),w(p))})},E=async({anchorName:t,manualCall:r=!1,options:d})=>{if(r&&U(e.onClick,t),t===n.value&&!b)return;const p=o.find(({name:D})=>t===D.value);if(!p)return;const T=x(),z=p.ownTop.value-g.value+T,I=Te(a);c.value=t,w(t,d),await Ie(a,{left:I,top:z,animation:_e,duration:V(e.duration)}),Be(()=>{c.value=""})},se=async()=>{await F(),a=Ne(s.value)},te=()=>{a.addEventListener("scroll",M)},R=()=>{a.removeEventListener("scroll",M)},oe=(t,r)=>{$e(()=>E({anchorName:t,options:r}))};return de(()=>l.value,async()=>{await F(),o.forEach(({name:t,setOwnTop:r})=>{t.value&&i.value.push(t.value),r()})}),be(async()=>{await se(),te()}),ue(R),fe(()=>{b=!0,R()}),pe(()=>{!b||n.value===void 0||(E({anchorName:n.value,options:{event:!1}}),b=!1)}),{n:Xe,classes:Ye,barEl:s,active:n,zIndex:_,anchorNameList:i,toNumber:V,scrollTo:oe,anchorClick:E}}});const qe=["onClick"];function Ke(e,l,o,f,c,s){return v(),y("div",{class:P(e.n()),ref:"barEl"},[K(e.$slots,"default"),q("ul",{class:P(e.n("anchor-list")),style:O({zIndex:e.toNumber(e.zIndex)+2,display:e.hideList?"none":"block"})},[(v(!0),y(Q,null,Z(e.anchorNameList,i=>(v(),y("li",{key:i,class:P(e.classes(e.n("anchor-item"),[e.active===i,e.n("anchor-item--active")])),style:O({color:e.active===i&&e.highlightColor?e.highlightColor:""}),onClick:n=>e.anchorClick({anchorName:i,manualCall:!0})},m(i),15,qe))),128))],6)],2)}const S=j(je,[["render",Ke]]);S.install=function(e){e.component(S.name,S)};const Qe={title:"标题",text:"文本"},Ze={title:"Title",text:"Text"},{add:ee,use:Ge,pack:L,packs:vn,merge:hn}=we(),Je=e=>{Ee(e),Ge(e)};J("zh-CN",ze);J("en-US",De);ee("zh-CN",Qe);ee("en-US",Ze);const We={class:"index-bar-example-container"},yn={__name:"index",setup(e){const l=u([]),o=u("#e7edf7"),f=u("#2e67ba");ve(()=>{for(let s=0;s<26;s++)l.value.push(String.fromCharCode(65+s))});function c(s){console.log(s)}return he(Je),ye(Ae,s=>{o.value=s==="darkTheme"?"rgb(41, 42, 45)":"#e7edf7",f.value=s==="darkTheme"?"#3980e8":"#2e67ba"}),(s,i)=>(v(),y("div",We,[B(h(S),{onChange:c,duration:"300"},{default:C(()=>[(v(!0),y(Q,null,Z(l.value,n=>(v(),y("div",{key:n},[B(Ue,{index:n,class:"index-bar-example-anchor",style:O({background:o.value,color:f.value})},{default:C(()=>[$(m(h(L).title)+" "+m(n),1)]),_:2},1032,["index","style"]),B(h(X),null,{default:C(()=>[$(m(n)+" "+m(h(L).text),1)]),_:2},1024),B(h(X),null,{default:C(()=>[$(m(n)+" "+m(h(L).text),1)]),_:2},1024)]))),128))]),_:1})]))}};export{yn as default};
