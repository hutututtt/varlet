import{p as P,P as $}from"./index-8a80d414.js";import{B as U}from"./index-0f0f1028.js";import{d as m,p as V,c as N,a as n,m as R}from"./components-b798c95f.js";import{d as z}from"./shared-39a089ed.js";import{p as A}from"./index-b02e49a3.js";import{a as j}from"./elements-66cdcec2.js";import{d as I,a as S,w,_ as L,p as T,f as O,i as B,S as h,M as C,m as M,N as i,O as b,P as y,Q as g,R as Q,j as D,at as W,r as q,n as E,W as F}from"./vue-router-0bbd6486.js";function G(o){return["left","center","right"].includes(o)}const H={show:{type:Boolean,default:!1},width:{type:[Number,String]},title:{type:String},message:{type:String},messageAlign:{type:String,default:"left",validator:G},confirmButton:{type:Boolean,default:!0},cancelButton:{type:Boolean,default:!0},confirmButtonText:{type:String},cancelButtonText:{type:String},confirmButtonTextColor:{type:String},cancelButtonTextColor:{type:String},confirmButtonColor:{type:String},cancelButtonColor:{type:String},dialogClass:{type:String},dialogStyle:{type:Object},onBeforeClose:m(),onConfirm:m(),onCancel:m(),"onUpdate:show":m(),...V(P,["overlay","overlayClass","overlayStyle","lockScroll","closeOnClickOverlay","teleport","onOpen","onClose","onOpened","onClosed","onClickOverlay","onRouteChange"])},{n:J,classes:K}=N("dialog"),X=I({name:"VarDialog",components:{VarPopup:$,VarButton:U},inheritAttrs:!1,props:H,setup(o){const a=S(!1),r=S(!1),e=()=>n(o["onUpdate:show"],!1),u=()=>{const{closeOnClickOverlay:l,onClickOverlay:p,onBeforeClose:k}=o;if(n(p),!!l){if(k!=null){n(k,"close",e);return}n(o["onUpdate:show"],!1)}},f=()=>{const{onBeforeClose:l,onConfirm:p}=o;if(n(p),l!=null){n(l,"confirm",e);return}n(o["onUpdate:show"],!1)},d=()=>{const{onBeforeClose:l,onCancel:p}=o;if(n(p),l!=null){n(l,"cancel",e);return}n(o["onUpdate:show"],!1)};return w(()=>o.show,l=>{a.value=l},{immediate:!0}),w(()=>o.closeOnClickOverlay,l=>{if(o.onBeforeClose!=null){r.value=!1;return}r.value=l},{immediate:!0}),{n:J,classes:K,pack:A,dt:z,popupShow:a,popupCloseOnClickOverlay:r,handleClickOverlay:u,confirm:f,cancel:d,toSizeUnit:j}}});function Y(o,a,r,e,u,f){const d=T("var-button"),l=T("var-popup");return O(),B(l,{class:i(o.n("popup")),"var-dialog-cover":"",show:o.popupShow,overlay:o.overlay,"overlay-class":o.overlayClass,"overlay-style":o.overlayStyle,"lock-scroll":o.lockScroll,"close-on-click-overlay":o.popupCloseOnClickOverlay,teleport:o.teleport,onOpen:o.onOpen,onClose:o.onClose,onClosed:o.onClosed,onOpened:o.onOpened,onRouteChange:o.onRouteChange,onClickOverlay:o.handleClickOverlay},{default:h(()=>[C("div",M({class:o.classes(o.n("$--box"),o.n(),o.dialogClass),style:{width:o.toSizeUnit(o.width),...o.dialogStyle}},o.$attrs),[C("div",{class:i(o.n("title"))},[b(o.$slots,"title",{},()=>[y(g(o.dt(o.title,o.pack.dialogTitle)),1)])],2),C("div",{class:i(o.n("message")),style:Q({textAlign:o.messageAlign})},[b(o.$slots,"default",{},()=>[y(g(o.message),1)])],6),C("div",{class:i(o.n("actions"))},[o.cancelButton?(O(),B(d,{key:0,class:i(o.classes(o.n("button"),o.n("cancel-button"))),"var-dialog-cover":"",text:"","text-color":o.cancelButtonTextColor,color:o.cancelButtonColor,onClick:o.cancel},{default:h(()=>[y(g(o.dt(o.cancelButtonText,o.pack.dialogCancelButtonText)),1)]),_:1},8,["class","text-color","color","onClick"])):D("",!0),o.confirmButton?(O(),B(d,{key:1,class:i(o.classes(o.n("button"),o.n("confirm-button"))),"var-dialog-cover":"",text:"","text-color":o.confirmButtonTextColor,color:o.confirmButtonColor,onClick:o.confirm},{default:h(()=>[y(g(o.dt(o.confirmButtonText,o.pack.dialogConfirmButtonText)),1)]),_:1},8,["class","text-color","color","onClick"])):D("",!0)],2)],16)]),_:3},8,["class","show","overlay","overlay-class","overlay-style","lock-scroll","close-on-click-overlay","teleport","onOpen","onClose","onClosed","onOpened","onRouteChange","onClickOverlay"])}const s=L(X,[["render",Y]]);let t,v={};function Z(o={}){return F(o)?{...v,message:o}:{...v,...o}}function c(o){return W()?new Promise(a=>{c.close();const r=Z(o),e=q(r);e.teleport="body",t=e;const{unmountInstance:u}=R(s,e,{onConfirm:()=>{n(e.onConfirm),a("confirm")},onCancel:()=>{n(e.onCancel),a("cancel")},onClose:()=>{n(e.onClose),a("close")},onClosed:()=>{n(e.onClosed),u(),t===e&&(t=null)},onRouteChange:()=>{u(),t===e&&(t=null)},"onUpdate:show":f=>{e.show=f}});e.show=!0}):Promise.resolve()}c.setDefaultOptions=function(o){v=o};c.resetDefaultOptions=function(){v={}};c.close=function(){if(t!=null){const o=t;t=null,E().then(()=>{o.show=!1})}};s.install=function(o){o.component(s.name,s)};c.install=function(o){o.component(s.name,s)};c.Component=s;export{c as D};
